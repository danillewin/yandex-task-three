{"version":3,"file":"script.min.js","sources":["script/app/app.js"],"names":["app","vm","getRandomInt","min","max","Math","floor","random","Number","prototype","formatTime","hours","this","minutes","seconds","window","AudioContext","webkitAudioContext","e","alert","TrackList","self","tracks","ko","observableArray","initDragDrop","addTrack","file","tags","track","image","imgUrl","base64String","reader","FileReader","context","ID3","loadTags","getAllTags","picture","i","data","length","String","fromCharCode","format","btoa","artist","title","album","year","lyrics","onload","decodeAudioData","result","audio","push","readAsArrayBuffer","dataReader","FileAPIReader","document","getElementsByClassName","addEventListener","classList","add","remove","preventDefault","key","dataTransfer","files","dropEffect","applyBindings","Player","gainNode","createGain","equalizerNode","createFilters","analyser","createAnalyser","fftSize","canvasCtx","getContext","currentTime","observable","playing","volume","volumeBuffer","currentProgress","currentDuration","currentStartTime","currentProgressTime","repeat","shuffle","currentTrack","tracksBuffer","chronometer","currentPreset","presets","name","values","subscribe","value","gain","resolveVolumeClass","computed","bindProgressBar","progress","wrapper","offsetX","offsetWidth","setTime","playPause","pause","play","source","createBufferSource","buffer","connect","destination","duration","start","onended","onEnd","bind","startChronometer","visualize","stop","killChronometer","next","index","indexOf","setTrack","prev","percent","time","bufferLength","frequencyBinCount","dataArray","Uint8Array","WIDTH","canvas","width","HEIGHT","height","draw","barHeight","drawVisual","barWidth","x","requestAnimationFrame","getByteFrequencyData","clearRect","fillStyle","fillRect","toggleMute","toggleRepeat","toggleShuffle","slice","sort","setInterval","current","clearInterval","createFilter","frequency","filter","createBiquadFilter","type","Q","val","frequencies","filters","map","reduce","curr","setEqualizer","preset","item"],"mappings":"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"}