{"version":3,"file":"script.min.js","sources":["script/app/app.js"],"names":["app","vm","getRandomInt","min","max","Math","floor","random","Number","prototype","formatTime","hours","this","minutes","seconds","window","AudioContext","webkitAudioContext","e","alert","TrackList","self","tracks","ko","observableArray","initDragDrop","addTrack","file","tags","track","image","imgUrl","base64String","reader","FileReader","context","ID3","loadTags","getAllTags","picture","i","data","length","String","fromCharCode","format","btoa","loaded","observable","artist","title","album","year","lyrics","onload","decodeAudioData","result","audio","push","readAsArrayBuffer","dataReader","FileAPIReader","document","getElementsByClassName","addEventListener","classList","add","remove","files","dataTransfer","preventDefault","key","type","dropEffect","setTrack","player","Player","currentTrack","playing","pause","play","bindPlayer","isPlaying","applyBindings","gainNode","createGain","equalizerNode","createFilters","analyser","createAnalyser","fftSize","canvasCtx","getContext","currentTime","volume","volumeBuffer","currentProgress","currentDuration","currentStartTime","currentProgressTime","repeat","shuffle","tracksBuffer","chronometer","currentPreset","presets","name","values","subscribe","value","gain","resolveVolumeClass","computed","bindProgressBar","progress","wrapper","offsetX","offsetWidth","setTime","playPause","source","createBufferSource","buffer","connect","destination","duration","start","onended","onEnd","bind","startChronometer","visualize","stop","killChronometer","next","index","indexOf","prev","percent","time","bufferLength","frequencyBinCount","dataArray","Uint8Array","WIDTH","canvas","width","HEIGHT","height","draw","barHeight","drawVisual","barWidth","x","requestAnimationFrame","getByteFrequencyData","clearRect","fillStyle","fillRect","toggleMute","toggleRepeat","toggleShuffle","slice","sort","setInterval","current","clearInterval","createFilter","frequency","filter","createBiquadFilter","Q","val","frequencies","filters","map","reduce","curr","setEqualizer","preset","item"],"mappings":"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"}