{"version":3,"file":"script.min.js","sources":["script/app/app.js"],"names":["app","vm","getRandomInt","min","max","Math","floor","random","Number","prototype","formatTime","hours","this","minutes","seconds","window","AudioContext","webkitAudioContext","e","alert","TrackList","self","tracks","ko","observableArray","initDragDrop","addTrack","file","tags","track","image","imgUrl","base64String","reader","FileReader","context","ID3","loadTags","getAllTags","picture","i","data","length","String","fromCharCode","format","btoa","loaded","observable","artist","title","album","year","lyrics","onload","decodeAudioData","result","audio","push","readAsArrayBuffer","dataReader","FileAPIReader","count","document","getElementsByClassName","addEventListener","classList","add","remove","files","dataTransfer","preventDefault","key","type","indexOf","dropEffect","setTrack","player","Player","currentTrack","playing","pause","play","bindPlayer","isPlaying","applyBindings","gainNode","createGain","equalizerNode","createFilters","analyser","createAnalyser","fftSize","canvasCtx","getContext","currentTime","volume","volumeBuffer","currentProgress","currentDuration","currentStartTime","currentProgressTime","seekTime","repeat","shuffle","tracksBuffer","chronometer","currentPreset","presets","name","values","subscribe","value","gain","resolveVolumeClass","computed","bindProgressBar","which","playPause","prev","next","deltaY","soundDown","soundUp","wrapper","seek","setTime","offsetX","offsetWidth","style","width","source","createBufferSource","buffer","connect","destination","duration","start","visualize","onended","onEnd","bind","startChronometer","console","log","stop","killChronometer","index","time","ceil","bufferLength","frequencyBinCount","dataArray","Uint8Array","WIDTH","canvas","HEIGHT","height","cancelAnimationFrame","drawAnimationId","draw","barHeight","barWidth","x","requestAnimationFrame","getByteFrequencyData","clearRect","fillStyle","fillRect","toggleMute","toggleRepeat","toggleShuffle","slice","sort","setInterval","current","clearInterval","createFilter","frequency","filter","createBiquadFilter","Q","val","frequencies","filters","map","reduce","curr","setEqualizer","preset","item"],"mappings":"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"}