{"version":3,"file":"script.min.js","sources":["script/app/app.js"],"names":["app","vm","getRandomInt","min","max","Math","floor","random","Number","prototype","formatTime","hours","this","minutes","seconds","window","AudioContext","webkitAudioContext","e","alert","TrackList","self","tracks","ko","observableArray","initDragDrop","addTrack","file","tags","track","image","imgUrl","base64String","reader","FileReader","context","ID3","loadTags","getAllTags","picture","i","data","length","String","fromCharCode","format","btoa","artist","title","album","year","lyrics","onload","decodeAudioData","result","audio","push","readAsArrayBuffer","dataReader","FileAPIReader","document","getElementsByClassName","addEventListener","classList","add","remove","preventDefault","key","dataTransfer","files","dropEffect","applyBindings","Player","gainNode","createGain","equalizerNode","createFilters","analyser","createAnalyser","fftSize","canvasCtx","getContext","currentTime","observable","playing","volume","volumeBuffer","currentProgress","currentDuration","currentStartTime","currentProgressTime","repeat","shuffle","equalizer","currentTrack","tracksBuffer","chronometer","presets","jazz","normal","rock","pop","subscribe","value","gain","resolveVolumeClass","computed","bindProgressBar","progress","wrapper","offsetX","offsetWidth","setTime","playPause","pause","play","source","createBufferSource","buffer","connect","destination","duration","start","onended","onEnd","bind","startChronometer","visualize","stop","killChronometer","next","index","indexOf","setTrack","prev","percent","time","bufferLength","frequencyBinCount","dataArray","Uint8Array","WIDTH","canvas","width","HEIGHT","height","draw","barHeight","drawVisual","barWidth","x","requestAnimationFrame","getByteFrequencyData","clearRect","fillStyle","fillRect","toggleMute","toggleRepeat","toggleShuffle","slice","sort","setInterval","current","clearInterval","createFilter","frequency","filter","createBiquadFilter","type","Q","frequencies","filters","map","reduce","curr"],"mappings":"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"}