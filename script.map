{"version":3,"file":"script.min.js","sources":["script/app/app.js"],"names":["app","vm","getRandomInt","min","max","Math","floor","random","Number","prototype","formatTime","hours","this","minutes","seconds","window","AudioContext","webkitAudioContext","e","alert","TrackList","self","tracks","ko","observableArray","initDragDrop","addTrack","file","tags","track","image","imgUrl","base64String","reader","FileReader","context","ID3","loadTags","getAllTags","picture","i","data","length","String","fromCharCode","format","btoa","artist","title","album","year","lyrics","onload","decodeAudioData","result","audio","push","readAsArrayBuffer","dataReader","FileAPIReader","document","getElementsByClassName","addEventListener","classList","add","remove","files","dataTransfer","preventDefault","key","type","dropEffect","setTrack","player","Player","currentTrack","playing","pause","play","bindPlayer","isPlaying","applyBindings","gainNode","createGain","equalizerNode","createFilters","analyser","createAnalyser","fftSize","canvasCtx","getContext","currentTime","observable","volume","volumeBuffer","currentProgress","currentDuration","currentStartTime","currentProgressTime","repeat","shuffle","tracksBuffer","chronometer","currentPreset","presets","name","values","subscribe","value","gain","resolveVolumeClass","computed","bindProgressBar","progress","wrapper","offsetX","offsetWidth","setTime","playPause","source","createBufferSource","buffer","connect","destination","duration","start","onended","onEnd","bind","startChronometer","visualize","stop","killChronometer","next","index","indexOf","prev","percent","time","bufferLength","frequencyBinCount","dataArray","Uint8Array","WIDTH","canvas","width","HEIGHT","height","draw","barHeight","drawVisual","barWidth","x","requestAnimationFrame","getByteFrequencyData","clearRect","fillStyle","fillRect","toggleMute","toggleRepeat","toggleShuffle","slice","sort","setInterval","current","clearInterval","createFilter","frequency","filter","createBiquadFilter","Q","val","frequencies","filters","map","reduce","curr","setEqualizer","preset","item"],"mappings":"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"}