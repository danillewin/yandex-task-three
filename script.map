{"version":3,"file":"script.min.js","sources":["script/app/app.js"],"names":["app","vm","getRandomInt","min","max","Math","floor","random","Number","prototype","formatTime","hours","this","minutes","seconds","window","AudioContext","webkitAudioContext","e","alert","TrackList","self","tracks","ko","observableArray","initDragDrop","addTrack","file","tags","track","image","imgUrl","base64String","reader","FileReader","context","ID3","loadTags","getAllTags","picture","i","data","length","String","fromCharCode","format","btoa","loaded","observable","artist","title","album","year","lyrics","onload","decodeAudioData","result","audio","push","readAsArrayBuffer","dataReader","FileAPIReader","document","getElementsByClassName","addEventListener","classList","add","remove","files","dataTransfer","preventDefault","key","type","indexOf","dropEffect","setTrack","player","Player","currentTrack","playing","pause","play","bindPlayer","isPlaying","applyBindings","gainNode","createGain","equalizerNode","createFilters","analyser","createAnalyser","fftSize","canvasCtx","getContext","currentTime","volume","volumeBuffer","currentProgress","currentDuration","currentStartTime","currentProgressTime","seekTime","repeat","shuffle","tracksBuffer","chronometer","currentPreset","presets","name","values","subscribe","value","gain","resolveVolumeClass","computed","bindProgressBar","wrapper","seek","setTime","offsetX","offsetWidth","style","width","playPause","source","createBufferSource","buffer","connect","destination","duration","start","visualize","onended","onEnd","bind","startChronometer","stop","killChronometer","next","index","prev","time","bufferLength","frequencyBinCount","dataArray","Uint8Array","WIDTH","canvas","HEIGHT","height","cancelAnimationFrame","drawAnimationId","draw","barHeight","barWidth","x","requestAnimationFrame","getByteFrequencyData","clearRect","fillStyle","fillRect","toggleMute","toggleRepeat","toggleShuffle","slice","sort","setInterval","current","clearInterval","createFilter","frequency","filter","createBiquadFilter","Q","val","frequencies","filters","map","reduce","curr","setEqualizer","preset","item"],"mappings":"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"}