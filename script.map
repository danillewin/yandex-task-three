{"version":3,"file":"script.min.js","sources":["script/app/app.js"],"names":["app","vm","getRandomInt","min","max","Math","floor","random","Number","prototype","formatTime","hours","this","minutes","seconds","window","AudioContext","webkitAudioContext","e","alert","TrackList","self","tracks","ko","observableArray","initDragDrop","addTrack","file","tags","track","image","imgUrl","base64String","reader","FileReader","context","ID3","loadTags","getAllTags","picture","i","data","length","String","fromCharCode","format","btoa","artist","title","album","year","lyrics","onload","decodeAudioData","result","audio","push","readAsArrayBuffer","dataReader","FileAPIReader","document","getElementsByClassName","addEventListener","classList","add","remove","preventDefault","key","dataTransfer","files","dropEffect","setTrack","Player","bindPlayer","currentTrack","isPlaying","playing","applyBindings","gainNode","createGain","equalizerNode","createFilters","analyser","createAnalyser","fftSize","canvasCtx","getContext","currentTime","observable","volume","volumeBuffer","currentProgress","currentDuration","currentStartTime","currentProgressTime","repeat","shuffle","tracksBuffer","chronometer","currentPreset","presets","name","values","subscribe","value","gain","resolveVolumeClass","computed","bindProgressBar","progress","wrapper","offsetX","offsetWidth","setTime","playPause","pause","play","source","createBufferSource","buffer","connect","destination","duration","start","onended","onEnd","bind","startChronometer","visualize","stop","killChronometer","next","index","indexOf","prev","percent","time","bufferLength","frequencyBinCount","dataArray","Uint8Array","WIDTH","canvas","width","HEIGHT","height","draw","barHeight","drawVisual","barWidth","x","requestAnimationFrame","getByteFrequencyData","clearRect","fillStyle","fillRect","toggleMute","toggleRepeat","toggleShuffle","slice","sort","setInterval","current","clearInterval","createFilter","frequency","filter","createBiquadFilter","type","Q","val","frequencies","filters","map","reduce","curr","setEqualizer","preset","item"],"mappings":"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"}