{"version":3,"file":"script.min.js","sources":["script/app/app.js"],"names":["app","vm","getRandomInt","min","max","Math","floor","random","Number","prototype","formatTime","hours","this","minutes","seconds","window","AudioContext","webkitAudioContext","e","alert","TrackList","self","tracks","ko","observableArray","initDragDrop","addTrack","file","tags","track","image","imgUrl","base64String","reader","FileReader","context","ID3","loadTags","getAllTags","picture","i","data","length","String","fromCharCode","format","btoa","artist","title","album","year","lyrics","onload","decodeAudioData","result","audio","push","readAsArrayBuffer","dataReader","FileAPIReader","document","getElementsByClassName","addEventListener","classList","add","remove","preventDefault","key","dataTransfer","files","dropEffect","setTrack","player","Player","currentTrack","playing","pause","play","bindPlayer","isPlaying","applyBindings","gainNode","createGain","equalizerNode","createFilters","analyser","createAnalyser","fftSize","canvasCtx","getContext","currentTime","observable","volume","volumeBuffer","currentProgress","currentDuration","currentStartTime","currentProgressTime","repeat","shuffle","tracksBuffer","chronometer","currentPreset","presets","name","values","subscribe","value","gain","resolveVolumeClass","computed","bindProgressBar","progress","wrapper","offsetX","offsetWidth","setTime","playPause","source","createBufferSource","buffer","connect","destination","duration","start","onended","onEnd","bind","startChronometer","visualize","stop","killChronometer","next","index","indexOf","prev","percent","time","bufferLength","frequencyBinCount","dataArray","Uint8Array","WIDTH","canvas","width","HEIGHT","height","draw","barHeight","drawVisual","barWidth","x","requestAnimationFrame","getByteFrequencyData","clearRect","fillStyle","fillRect","toggleMute","toggleRepeat","toggleShuffle","slice","sort","setInterval","current","clearInterval","createFilter","frequency","filter","createBiquadFilter","type","Q","val","frequencies","filters","map","reduce","curr","setEqualizer","preset","item"],"mappings":"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"}