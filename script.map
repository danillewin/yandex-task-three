{"version":3,"file":"script.min.js","sources":["script/app/app.js"],"names":["app","vm","getRandomInt","min","max","Math","floor","random","Number","prototype","formatTime","hours","this","minutes","seconds","window","AudioContext","webkitAudioContext","e","alert","TrackList","self","tracks","ko","observableArray","initDragDrop","addTrack","file","tags","track","image","imgUrl","base64String","reader","FileReader","context","ID3","loadTags","getAllTags","picture","i","data","length","String","fromCharCode","format","btoa","artist","title","album","year","lyrics","onload","decodeAudioData","result","audio","push","readAsArrayBuffer","dataReader","FileAPIReader","document","getElementsByClassName","addEventListener","classList","add","remove","preventDefault","key","dataTransfer","files","dropEffect","applyBindings","Player","gainNode","createGain","equalizerNode","createFilters","analyser","createAnalyser","fftSize","canvasCtx","getContext","currentTime","observable","playing","volume","volumeBuffer","currentProgress","currentDuration","currentStartTime","currentProgressTime","repeat","shuffle","equalizer","currentTrack","tracksBuffer","chronometer","presets","jazz","normal","rock","pop","visualizations","visualization","subscribe","value","gain","resolveVolumeClass","computed","bindProgressBar","progress","wrapper","offsetX","offsetWidth","setTime","playPause","pause","play","source","createBufferSource","buffer","connect","destination","duration","start","onended","onEnd","bind","startChronometer","visualize","stop","killChronometer","next","index","indexOf","setTrack","prev","percent","time","bufferLength","frequencyBinCount","dataArray","Uint8Array","WIDTH","canvas","width","HEIGHT","height","draw","barHeight","drawVisual","barWidth","x","requestAnimationFrame","getByteFrequencyData","clearRect","fillStyle","fillRect","toggleMute","toggleRepeat","toggleShuffle","slice","sort","setInterval","current","clearInterval","createFilter","frequency","filter","createBiquadFilter","type","Q","frequencies","filters","map","reduce","curr","toggleVisualization"],"mappings":"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"}