app={},app.vm={},function(a){a.vm.TrackList=function(){var a=this;a.tracks=ko.observableArray([]),a.initDragDrop()},a.vm.TrackList.prototype.addTrack=function(a){var b,c,d,e,f=this,g="";ID3.loadTags(a,function(){if(b=ID3.getAllTags(a),b.picture){d=b.picture;for(var h=0;h<d.data.length;h++)g+=String.fromCharCode(d.data[h]);e="data:"+d.format+";base64,"+window.btoa(g)}else e="images/unknown.png";c={artist:b.artist||"unknown",title:b.title||"unknown",album:b.album||"unknown",year:b.year,lyrics:b.lyrics,picture:e},f.tracks.push(c)},{tags:["artist","title","album","year","lyrics","picture"],dataReader:FileAPIReader(a)})},a.vm.TrackList.prototype.initDragDrop=function(){var a=this;document.getElementsByClassName("track-list")[0].addEventListener("dragenter",function(a){this.classList.add("track-list_dragover")}),document.getElementsByClassName("track-list")[0].addEventListener("dragleave",function(a){this.classList.remove("track-list_dragover")}),document.getElementsByClassName("track-list")[0].addEventListener("drop",function(b){b.preventDefault&&b.preventDefault(),this.classList.remove("track-list_dragover");var c=b.dataTransfer.files[0];return a.addTrack(c),!1}),document.getElementsByClassName("track-list")[0].addEventListener("dragover",function(a){return a.preventDefault&&a.preventDefault(),a.dataTransfer.dropEffect="copy",!1})}}(window.app),app.TrackList=new app.vm.TrackList,ko.applyBindings(app.TrackList,document.getElementsByClassName("track-list")[0]),function(a){a.vm.Player=function(){var b=this;b.mode=ko.observable(),b.vol=ko.observable(),b.repeat=ko.observable(),b.shuffle=ko.observable(),b.equalizer=ko.observable(),b.presets={jazz:"",normal:"",rock:"",pop:""},b.tracks=a.TrackList.tracks},a.vm.Player.prototype.pause=function(){},a.vm.Player.prototype.play=function(){},a.vm.Player.prototype.prev=function(){},a.vm.Player.prototype.next=function(){}}(window.app);
//# sourceMappingURL=script.map
